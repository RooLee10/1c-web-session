# 1c-web-session — Claude Code skill

Скилл для [Claude Code](https://claude.ai/code), который автоматизирует работу с **1С:Предприятие в веб-клиенте** через [Playwright MCP](https://github.com/microsoft/playwright-mcp).

## Что умеет

- Запускать, перезапускать и завершать сеанс 1С
- Навигировать по разделам интерфейса (с кешированием ID)
- Создавать и редактировать элементы справочников
- Заполнять и проводить документы с табличными частями
- Генерировать тестовые данные через UI
- Обрабатывать диалоги, лицензионные предупреждения, панели ошибок

## Как работает

Скилл содержит паттерны, специфичные для веб-клиента 1С:
- **Clipboard paste** вместо `fill()`/`type()` — стандартный Playwright не работает в 1С
- **`_DLB`-суффиксные селекторы** для кнопок выбора (справочники и перечисления)
- **Навигационный кеш** в `.claude/1c-nav.json` — ID разделов и пунктов меню специфичны для каждой базы
- **`browser_run_code`** с максимальной цепочкой действий в одном вызове

## Требования

- [Claude Code](https://claude.ai/code)
- [Playwright MCP](https://github.com/microsoft/playwright-mcp) в `.mcp.json`
- 1С:Предприятие с опубликованной веб-базой

### Пример `.mcp.json`

```json
{
  "mcpServers": {
    "playwright": {
      "command": "npx",
      "args": ["@playwright/mcp@latest", "--timeout", "500"]
    }
  }
}
```

## Установка

Скопируй содержимое `.claude/` в корень своего проекта:

```
your-project/
  .claude/
    skills/
      1c-web-session/
        SKILL.md
        references/
          scan-nav.js
          optimization.md
  CLAUDE.md          ← укажи URL своей базы
```

Пример `CLAUDE.md` — см. [`CLAUDE.md`](./CLAUDE.md) в этом репозитории.

## Использование

После установки напиши в чате Claude Code:

```
/1c-web-session
```

Или напрямую попроси:

```
запусти базу
создай справочник Номенклатура "Билет семейный"
создай документ ПродажаБилета для клиента Петрова
```

Claude автоматически подхватит скилл и начнёт работу в браузере.

## Структура

```
.claude/skills/1c-web-session/
  SKILL.md                  — инструкции для Claude (паттерны, примеры кода)
  references/
    scan-nav.js             — JS-скрипт сканирования навигационного меню
    optimization.md         — руководство по оптимизации browser_run_code
```

## Лицензия

MIT
